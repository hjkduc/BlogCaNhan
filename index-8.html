<!--
 // WEBSITE: https://blog-ca-nhan.vercel.app/
 // FACEBOOK: https://www.facebook.com/Ltadduc
 // GITHUB: https://github.com/hjkduc
-->
<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>BlogCaNhan - 2280600721 - Le Tran Anh Duc</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
	<link rel="stylesheet" href="plugins/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="plugins/themify/css/themify-icons.css">
	<link rel="stylesheet" href="plugins/slick-carousel/slick-theme.css">
	<link rel="stylesheet" href="plugins/slick-carousel/slick.css">
	<link rel="stylesheet" href="plugins/owl-carousel/owl.carousel.min.css">
	<link rel="stylesheet" href="plugins/owl-carousel/owl.theme.default.min.css">
	<link rel="stylesheet" href="plugins/magnific-popup/magnific-popup.css">
	<link rel="stylesheet" href="css/style.css">
	<style>
		.about-author .img-fluid {
			border-radius: 50%; width: 150px; height: 150px;
			object-fit: cover; border: 4px solid #fff;
			box-shadow: 0 5px 15px rgba(0,0,0,0.1);
		}
		.ti-github:before { content: "\e69b"; font-family: 'themify'; }
	</style>
</head>

<body>
	<header class="header-top bg-dark justify-content-between navigation-dark">
		<nav class="navbar navbar-expand-lg navigation ">
			<div class="container">
				<a class="navbar-brand d-lg-none" href="index.html"><img src="images/logo-w.png" alt="" class="img-fluid"></a>
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
					<span class="ti-menu"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarCollapse">
					<ul id="menu" class="menu navbar-nav">
												<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
								aria-haspopup="true" aria-expanded="false">
								Home
							</a>
							<div class="dropdown-menu" aria-labelledby="navbarDropdown">
								<a class="dropdown-item" href="index.html">Home</a>
								<a class="dropdown-item" href="index-2.html">Buổi 1</a>
								<a class="dropdown-item" href="index-3.html">Buổi 2</a>
								<a class="dropdown-item" href="index-4.html">Buổi 3</a>
								<a class="dropdown-item" href="index-5.html">Buổi 4</a>
								<a class="dropdown-item" href="index-6.html">Buổi 5</a>
								<a class="dropdown-item" href="index-7.html">Buổi 6</a>
								<a class="dropdown-item" href="index-8.html">Buổi 7</a>
								<a class="dropdown-item" href="index-9.html">Buổi 8</a>
							</div>
						</li>
						<li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
						<li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
					</ul>
				</div>
				<ul class="header-socials-2 text-right d-none d-lg-block mb-0">
					<li class="list-inline-item"><a href="https://www.facebook.com/Ltadduc" target="_blank"><i class="ti-facebook"></i></a></li>
					<li class="list-inline-item"><a href="https://github.com/hjkduc" target="_blank"><i class="ti-github"></i></a></li>
				</ul>
			</div>
		</nav>
	</header>

	<div class="header-logo py-5"></div>

	<section class="section-padding pt-4">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-md-8">
					<article class="post-grid mb-5">
						<span class="font-sm text-color letter-spacing text-uppercase post-meta font-extra">Buổi 7</span>
						<h2 class="mb-1 mt-2 post-title"><a href="#">Đa tuyến (Multithreading): Xây dựng Server có khả năng mở rộng</a></h2>
						<div class="post-content mt-4">
							<p>Trong thực tế, một Server TCP không chỉ nhận một kết nối mà phải xử lý hàng trăm, thậm chí hàng ngàn yêu cầu đồng thời. Nếu sử dụng mô hình Server đơn luồng, mọi yêu cầu sẽ phải xếp hàng và chờ đợi, dẫn đến hiệu suất kém và trải nghiệm người dùng tồi tệ. Đa tuyến (Multithreading) là giải pháp tiêu chuẩn để xây dựng các Server hiệu suất cao.</p>

							<h4 class="mt-4">1. Mô hình Server Đơn luồng vs Đa luồng</h4>
							<p>Sự khác biệt nằm ở cách Server xử lý yêu cầu `connectionSocket = welcomeSocket.accept()`:</p>
							<ul>
								<li>Đơn luồng: Server xử lý toàn bộ logic giao tiếp trên cùng một luồng. Trong khi xử lý Client A, nó không thể chấp nhận Client B.</li>
								<li>Đa luồng: Ngay khi nhận được `connectionSocket`, luồng chính tạo ra một luồng con và chuyển giao Socket đó cho luồng con xử lý. Luồng chính ngay lập tức quay lại `welcomeSocket.accept()` để chờ Client mới.</li>
							</ul>

							<h4 class="mt-4">2. Triển khai Đa tuyến trong Java</h4>
							<p>Trong Java, bạn có thể tạo luồng bằng cách kế thừa từ lớp `Thread` hoặc triển khai giao diện `Runnable`. Phương pháp triển khai Runnable được ưa chuộng hơn vì nó không ràng buộc lớp xử lý vào hệ thống kế thừa của Java, giúp thiết kế linh hoạt hơn.</p>
							<p>Mỗi `ClientHandler` (lớp triển khai `Runnable`) sẽ chứa logic giao tiếp (đọc/ghi Stream) với một Client duy nhất.</p>

							<h4 class="mt-4">3. Code chi tiết: Server Đa tuyến TCP</h4>
							<p>Server chính chỉ làm nhiệm vụ lắng nghe và khởi tạo luồng:</p>
							<pre><code>
// MultiThreadServer.java
import java.net.*;
import java.io.*;
public class MultiThreadServer {
    public static void main(String[] args) throws IOException {
        int port = 6789;
        ServerSocket welcomeSocket = new ServerSocket(port);
        System.out.println("Server is listening on port " + port + "...");
        while (true) {
            Socket connectionSocket = welcomeSocket.accept();
            System.out.println("New client connected from: " + connectionSocket.getInetAddress());
            
            // TẠO VÀ CHẠY LUỒNG MỚI CHO CLIENT
            ClientHandler handler = new ClientHandler(connectionSocket);
            new Thread(handler).start(); // Luồng chính tiếp tục vòng lặp while(true)
        }
    }
}
							</code></pre>
							<p>Lớp `ClientHandler` xử lý giao tiếp riêng biệt:</p>
							<pre><code>
// ClientHandler.java (Implement Runnable)
import java.net.*;
import java.io.*;
class ClientHandler implements Runnable {
    private Socket clientSocket;
    public ClientHandler(Socket socket) { this.clientSocket = socket; }
    
    public void run() {
        try {
            BufferedReader inFromClient = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            PrintWriter outToClient = new PrintWriter(clientSocket.getOutputStream(), true);
            
            String clientSentence;
            while ((clientSentence = inFromClient.readLine()) != null) {
                // Xử lý dữ liệu trong luồng riêng biệt
                outToClient.println("Echo: " + clientSentence.toUpperCase());
            }
        } catch (IOException e) {
            System.out.println("Client disconnected or error: " + e.getMessage());
        } finally {
            try { clientSocket.close(); } catch (IOException e) {}
        }
    }
}
							</code></pre>

							<blockquote class="blockquote">
								<p>Đa tuyến không chỉ là một kỹ thuật, nó là tiêu chuẩn bắt buộc đối với mọi ứng dụng Server cần xử lý đồng thời nhiều người dùng.</p>
							</blockquote>
						</div>
					</article>
				</div>
				<div class="col-lg-4 col-md-4">
					<div class="sidebar-widget about mb-5 text-center p-3">
						<div class="about-author">
							<img src="images/AnhCaNhan.png" alt="Lê Trần Anh Đức" class="img-fluid"> 
						</div>
						<h4 class="mb-0 mt-4">Lê Trần Anh Đức</h4>
						<p>2280600721</p>
						<p>Xin chào, tôi là Đức. Đây là không gian cá nhân của tôi để chia sẻ về lập trình mạng, an ninh mạng và những kiến thức công nghệ thú vị khác.</p>
						<h5 class="mt-5 mb-3">FOLLOW ME</h5>
						<div class="social-icon">
							<ul class="list-inline">
								<li class="list-inline-item"><a href="https://www.facebook.com/Ltadduc" target="_blank"><i class="ti-facebook"></i></a></li>
								<li class="list-inline-item"><a href="https://github.com/hjkduc" target="_blank"><i class="ti-github"></i></a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<script src="plugins/jquery/jquery.js"></script>
	<script src="plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="js/custom.js"></script>
</body>
</html>